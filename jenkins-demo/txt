pipeline {
    agent any

    stages {
        stage('Generate Site') {
            steps {
                script {
                    sh 'rm -rf site || true'
                    sh 'mkdir -p site'

                    writeFile file: 'site/index.html', text: """
<!doctype html>
<html lang="en">
<head>
  <title>Karunya University — Student Info</title>
</head>
<body>
  <header>
    <h1>Karunya University</h1>
  </header>

  <main>
    <section>
      <h2>Student Details</h2>
      <p><strong>Name:</strong> DIDDIKUNTA SATYANARAYANA</p>
      <p><strong>Register Number:</strong> URK22C51126</p>
     
    </section>
</main>

  <footer>
    <p>&copy; ${new Date().format('yyyy')} Karunya University — Generated by Jenkins</p>
  </footer>
</body>
</html>
"""
                }
            }
        }

        stage('Archive Site') {
            steps {
                archiveArtifacts artifacts: 'site/**', fingerprint: true
            }
        }
    }

    post {
        always {
            echo '✅ Build complete: HTML site generated and archived successfully.'
        }
    }
}
